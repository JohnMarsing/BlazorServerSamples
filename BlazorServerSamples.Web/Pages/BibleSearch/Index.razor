@page "/BibleSearch"

@using Page = BlazorServerSamples.Web.Links.BibleSearch

<PageTitle>@Page.Title</PageTitle>

<div class="pb-2 mt-4 mb-2 border-bottom">
	<h1><i class="@Page.Icon"></i> @Page.Title</h1>
</div>

<div class="card mt-4 p-2 bg-light">


	<EditForm Model="VM" OnValidSubmit="HandleFormSubmit">
		<DataAnnotationsValidator />

		<BlazoredTypeahead SearchMethod="SearchBibleBooks"
											 @bind-Value="VM.SelectedBook"
											 EnableDropDown="true"
											 MinimumLength="1"
											 placeholder="Search by bible name...">
			<SelectedTemplate Context="mycontext">
				@mycontext.Title
			</SelectedTemplate>
			<HelpTemplate>
				Please enter at least 1 character to perform a search.
			</HelpTemplate>
			<ResultTemplate Context="mycontext">
				@mycontext.Title @mycontext.LastChapter
			</ResultTemplate>
		</BlazoredTypeahead>
		<ValidationMessage For="@(() => VM.SelectedBook)" />

		<button class="btn btn-primary m-1" type="submit">Submit</button>
	</EditForm>

	@if (VM.SelectedBook != null)
	{

		<ul class="list-inline">
			
		@for (int i = 1; i <= VM.SelectedBook.LastChapter; i++)
		{
			<li class="list-inline-item">
				<a href='@VM.Mhb(i)' target="_blank">@i</a>
			</li>
		}
		</ul>

	}
</div>
